docker build -t ansible-image .


MSYS_NO_PATHCONV=1 docker run -it --rm --name ansible-container \
  ansible-image 

# Inside the Container 
eval "$(ssh-agent -s)"
ssh-add /root/.ssh/id_rsa 


docker run -it --rm --name ansible-container \
    -v $SSH_AUTH_SOCK:/run/ssh-agent.sock \
    -e SSH_AUTH_SOCK=/run/ssh-agent.sock \
    ansible-image


docker inspect ansible-container     outside
ls -l /run/ssh-agent.sock            inside


eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_rsa
echo $SSH_AUTH_SOCK    



docker run -it ansible-docker
ansible --version
apt list -a ansible


ansible-inventory -i inventory.ini --list

ansible my_vps -m ping -i inventory.ini


ansible-playbook /app/playbooks/site.yml
ansible-playbook /app/playbooks/setup.yml
ansible-playbook /app/playbooks/deploy.yml
ansible-playbook /app/playbooks/maintenance.yml
ansible-playbook -i inventory.ini /app/playbooks/site.yml

for playbook in /app/playbooks/site.yml /app/playbooks/basic.yml; do
    ansible-playbook -i inventory.ini "$playbook" 
done


sudo iptables -L -v -n
systemctl start systemd

systemctl status nginx


ansible all -m command -a "uptime"
ansible all -m apt -a "name=nginx state=latest" --become





























Step 1: Install Docker
sudo apt-get update
sudo apt install docker-ce
docker version
sudo usermod -aG docker labsuser
docker images

Step 2: Write Dockerfile and create Ansible image
FROM ubuntu:20.04
ENV ANSIBLE_VERSION 2.9.17
RUN apt-get update; \
    apt-get install -y gcc python3; \
    apt-get install -y python3-pip; \
    apt-get clean all
RUN pip3 install --upgrade pip; \
    pip3 install "ansible==${ANSIBLE_VERSION}"; \
    pip3 install ansible

Step 3: Build the image using the following Docker command
docker build -t ansible:latest .

Step 4: Validate image creation by checking image list
docker images
or
docker image ls

Step 5: Run Ansible inside a docker container
docker run -it ansible
ansible --version

Step 6: [Optional] Push your Ansible image to Docker Hub
docker login
docker push ansible:latest
docker tag ansible sk12k/ansible
docker image ls
docker push sk12k/ansible